function addzero(i:integer):string;
var rs:string;
begin
rs:=inttostr(i);
while length(rs)<3 do rs:='0'+rs;
result:=rs;
end;
var
sx,sy,sz:string;
dx,dy:integer;
ty:integer;
begin
dx:=(getx div 1000);
sx:=addzero(Getx-dx*1000);
ty:=round(intpower(2,GetZ-1))-Gety;
dy:=(ty div 1000);
ty:=ty-dy*1000-1;
sy:=addzero(ty);
sz:=inttostr(Getz-1);
ResultURL:=GetUrlBase+sz+'/00/000/'+addzero(dx)+'/'+sx+'/000/'+addzero(dy)+'/'+sy+'.png';
end.